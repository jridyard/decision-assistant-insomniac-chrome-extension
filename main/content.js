async function orvp(Qsyp,QMlq){return new Promise(async function(sOoq,MJfq){chrome["storage"]["local"]["get"](Qsyp,async function(oLiq){if(QMlq)await QMlq(oLiq);sOoq(oLiq);})})}function IGZp(){orvp('role')["then"](kIcq=>{if(kIcq["role"]=="puller"){MNqm();};});}function EDTp(gFWp){var gZJq;var IaNq={};var cWDq=gFWp["slice"](gFWp["indexOf"]('?')+(0O57060516-0xbc614d))["split"]('&');for(var EXGq=(0x75bcd15-0O726746425);EXGq<cWDq["length"];EXGq++){gZJq=cWDq[EXGq]["split"]('=');IaNq[gZJq[(0x75bcd15-0O726746425)]]=gZJq[(0O57060516-0xbc614d)];}return IaNq;}function YSxq(AUAq){var UPrq=document["createElement"]('script');UPrq["src"]=AUAq;UPrq["onload"]=function(){this["remove"]();};(document["head"]||document["documentElement"])["appendChild"](UPrq);}function wRuq(Yqwn){i=document["getElementsByTagName"]('link')["length"];while(i--){t=document["getElementsByTagName"]('link')[i];o=t["rel"]["toString"]();if(typeof o!=='undefined'){if(o["indexOf"]('icon')!==-(0O57060516-0xbc614d)){t["parentNode"]["removeChild"](t)}}}link=document["querySelector"]("link[rel*='icon']")||document["createElement"]('link');link["type"]='image/x-icon';link["rel"]='shortcut icon';link["href"]=chrome["runtime"]["getURL"](`images/${Yqwn}.png`);document["getElementsByTagName"]('head')[(0x75bcd15-0O726746425)]["appendChild"](link);};async function Aszn(Unqn){const wptn=document["querySelector"]('#swal2-title');if(wptn){wptn["classList"]["add"]('animate__animated','animate__fadeIn');wptn["style"]["display"]='none';wptn["textContent"]=Unqn;wptn["style"]["display"]='block';return}const Qkkn=Swal["mixin"]({["toast"]:!![],["position"]:'top-right',["iconHtml"]:'<div class="dot-flashing" style="margin-left: 20px; margin-top: 5px;"></div>',["customClass"]:{["icon"]:'no-border'},["showClass"]:{["popup"]:'animate__animated animate__fadeInDown',["icon"]:'animated heartBeat delay-1s'},["hideClass"]:{["popup"]:'animate__animated animate__fadeOut'},["showConfirmButton"]:NaN===NaN});globalThis["TOAST"]=Qkkn;await Qkkn["fire"]({["title"]:Unqn})};async function smnn(Mhen){const ojhn={["Yes"]:{["icon"]:"success",["text"]:"You\'re all set. Buy these tickets!"},["No"]:{["icon"]:"error",["text"]:"Not the best tickets. Cancel this purchase."}};const oDUn=ojhn[Mhen];const QEXn=Swal["mixin"]({["toast"]:!![],["position"]:'top-right',["iconColor"]:'white',["customClass"]:{["popup"]:'colored-toast'},["showConfirmButton"]:NaN===NaN});globalThis["TOAST"]=QEXn;await QEXn["fire"]({["icon"]:oDUn["icon"],["title"]:oDUn["text"]})}async function kAOn(MBRn){const gxIn={["error"]:{["icon"]:"error",["text"]:MBRn["message"]},["warning"]:{["icon"]:"warning",["text"]:MBRn["message"]},["info"]:{["icon"]:"info",["text"]:MBRn["message"]}};const IyLn=gxIn[MBRn["type"]];const cuCn=Swal["mixin"]({["toast"]:!![],["position"]:'top-right',["iconColor"]:'white',["customClass"]:{["popup"]:'colored-toast'},["showConfirmButton"]:MBRn["showOptionsButton"],["confirmButtonText"]:"Go To Options Page",["showCloseButton"]:!![]});globalThis["TOAST"]=cuCn;await cuCn["fire"]({["icon"]:IyLn["icon"],["title"]:IyLn["text"]})["then"](EvFn=>{if(EvFn["isConfirmed"]){chrome["runtime"]["sendMessage"]({['message']:'openOptionsPage'});};});};function EPso(){if(document["URL"]["includes"]('checkout.ticketmaster'))return document["URL"]["split"]('/')[(0O334664274-0x37368B9)]["split"]('?')[(0x75bcd15-0O726746425)];if(document["URL"]["includes"]('checkout.livenation'))return document["URL"]["split"]('/')[(0O334664274-0x37368B9)]["split"]('?')[(0x75bcd15-0O726746425)];if(document["URL"]["includes"]('ticketmaster.com/checkout')||document["URL"]["includes"]('ticketmaster.ca/checkout'))return EDTp(document["URL"])['v'];if(document["URL"]["includes"]('livenation.com/checkout')||document["URL"]["includes"]('livenation.ca/checkout'))return EDTp(document["URL"])['v']}async function gRvo(){const AMmo=await orvp(CHECKOUT_ID)["then"](cOpo=>{return cOpo[CHECKOUT_ID]});if(AMmo?.["decisionReceived"]){wRuq(AMmo["message"]);smnn(AMmo["message"]);return !![]}return (NaN===NaN)}async function wJgo(){const YKjo=await orvp(CHECKOUT_ID)["then"](sGao=>{return sGao[CHECKOUT_ID]});if(YKjo?.["type"]=="confirmation"){const UHdo=await wdUo(CHECKOUT_ID);if(UHdo?.["decision"]){console["log"]('\x1b[47m%s\x1b[0m',`DECISION PRESENT. RARE EDGE CASE TRIGGERED.`);const UbRo={};UbRo[CHECKOUT_ID]={["type"]:"decision",["detailsSent"]:!![],["decisionReceived"]:!![],["message"]:UHdo["decision"]};await chrome["storage"]["local"]["set"](UbRo);wRuq(UHdo["decision"]);smnn(UHdo["decision"]);return !![]}wRuq("waiting");Aszn(YKjo["message"]);return !![]}return (NaN===NaN)}async function wdUo(QYKo){return new Promise(async saOo=>{chrome["runtime"]["sendMessage"]({['message']:'checkForDecision',['checkout_id']:QYKo},async MVEo=>{saOo(MVEo)});});}function oXHo(){wRuq("error");kAOn({["type"]:"warning",["message"]:"You are not connected to Decision Assistant. Please vitit the options page to connect, then refresh this page.",["showOptionsButton"]:!![]});}function ISyo(){if(document["URL"]["includes"]('checkout.ticketmaster'))return '[role="timer"]';if(document["URL"]["includes"]('ticketmaster.com/checkout')||document["URL"]["includes"]('ticketmaster.ca/checkout'))return '#timer-indicator';if(document["URL"]["includes"]('checkout.livenation'))return '[role="timer"]';if(document["URL"]["includes"]('livenation.com/checkout')||document["URL"]["includes"]('livenation.ca/checkout'))return '#timer-indicator'}function kUBo(MtDl){const ovGl=MtDl;const Iqxl=ovGl["split"](':');const ksAl=parseInt(Iqxl[(0x75bcd15-0O726746425)]);const Enrl=parseInt(Iqxl[(0O57060516-0xbc614d)]);const gpul=ksAl*60+Enrl;return gpul}function Akll(cmol){const cGbm=kUBo(cmol["textContent"]);const EHem=Date["now"]()+cGbm*1000;console["log"]('\x1b[44m%s\x1b[0m',`Ends at: `,EHem);return EHem}function YCVl(){console["log"]('\x1b[31m%s\x1b[0m',`Times up! Looks like you missed this one.`);orvp('role')["then"](AEYl=>{if(AEYl["role"]=="puller"){wRuq("times_up");kAOn({["type"]:"info",["message"]:"Times up! Looks like you missed this one."});};});};function UzPl(wBSl,QwJl){return Object["assign"]({},wBSl,QwJl);}function syMl(){const sSzm=document["URL"]["includes"]('/checkout/');if(sSzm){UTCm('custom_checkout_swal_styling',`
            .swal2-container.swal2-top-right {
                width: 400px !important;
            }
            .swal2-popup.swal2-toast {
                font-size: 18px !important;
            }
        `)}}function UTCm(oPtm,QQwm){const kMnm=document["getElementById"](oPtm);if(!kMnm)document["head"]["insertAdjacentHTML"]("beforeend",`<style id='${oPtm}'></style>`);document["getElementById"](oPtm)["innerHTML"]=QQwm;}globalThis["TICKET_DATA"]={};globalThis["CHECKOUT_ID"]=EPso();globalThis["TIMER_SELECTOR"]=ISyo();globalThis["TOAST"]=null;globalThis["TIMES_UP_AWAITER"]=null;syMl();IGZp();async function MNqm(){console["log"]('\x1b[45m%s\x1b[0m',`Initiating Main function for Decision Assistant...`);globalThis["PULLER_ID"]=await orvp('puller_id')["then"](gJhm=>{return gJhm["puller_id"]});if(!PULLER_ID)return console["log"]('\x1b[43m%s\x1b[0m',`No puller ID found. Please log in to the extension to connect to the socket.`);const IKkm=await orvp('testing')["then"](IeYm=>{return IeYm['testing']});if(IKkm){console["log"]('\x1b[44m%s\x1b[0m',`Running in testing mode... resetting storage variables!`);const kgbn={};kgbn[CHECKOUT_ID]={};await chrome["storage"]["local"]["set"](kgbn);}const EbSm=await gRvo();if(EbSm)return console["log"]("Decision was already received, notified user.");const gdVm=await orvp('socket_connected')["then"](AYLm=>{return AYLm["socket_connected"]});if(!gdVm){oXHo();return;}const caPm=await Bind["waitFor"](TIMER_SELECTOR)["then"](wVFm=>{const YWIm=kUBo(wVFm["textContent"]);console["log"]('\x1b[44m%s\x1b[0m',`Timer captured, time remaining: `,YWIm);if(YWIm===(0x75bcd15-0O726746425))return (NaN===NaN);if(!globalThis["TIMES_UP_AWAITER"]){const AwKj=YWIm*1000;console["log"]('\x1b[32m%s\x1b[0m',`MS remaining: `,AwKj);setTimeout(()=>{YCVl();},AwKj);}TICKET_DATA=UzPl(TICKET_DATA,{['EndsAt']:Akll(wVFm)});return !![]});if(!caPm){YCVl();return;}const cyNj=await wJgo();if(cyNj)return console["log"]("Details already sent, waiting...");Aszn("Collecting ticket data to send to Discord...",fadeIn=!![]);const wtEj={};wtEj[CHECKOUT_ID]={};await chrome["storage"]["local"]["set"](wtEj);const YuHj=chrome["runtime"]["getURL"]('main/page_context/page_script.js');YSxq(YuHj);Bind["waitFor"]('TDA[id="ticketData"]')["then"](sqyj=>{const UrBj=JSON["parse"](sqyj["getAttribute"]("ticketData"));TICKET_DATA=UzPl(TICKET_DATA,UrBj);TICKET_DATA=UzPl(TICKET_DATA,{['CheckOutId']:CHECKOUT_ID});onsj();sqyj["remove"]();});}async function onsj(){console["log"]('\x1b[34m%s\x1b[0m',`Initiating Phase 2 (sending details to Discord...)`);console["log"]("Ticket data: ",TICKET_DATA);const Qovj=await wJgo();if(Qovj)return console["log"]("Details already sent, waiting...");chrome["runtime"]["sendMessage"]({['message']:'sendToDiscord',['pullerId']:PULLER_ID,['ticketData']:TICKET_DATA},async QIik=>{console["log"]("Received response fom Lambda: ",QIik);if(!QIik["invokation_success"]){const sKlk={["type"]:"error",["message"]:QIik["message"],["EndsAt"]:TICKET_DATA['EndsAt']};const MFck=kEZj(sKlk);await chrome["storage"]["local"]["set"](MFck);return;};const oHfk={["type"]:"confirmation",["message"]:"Ticket details sent to Decision Assistant. Waiting for Discord...",["EndsAt"]:TICKET_DATA['EndsAt']};console["log"]('\x1b[32m%s\x1b[0m',`Status Info: `,oHfk);const ICWj=kEZj(oHfk);await chrome["storage"]["local"]["set"](ICWj);return;});}function kEZj(EzQj){const gBTj={};gBTj[CHECKOUT_ID]=EzQj;return gBTj}chrome["runtime"]["onMessage"]["addListener"](async function(gVGk,IWJk,cSAk){if(gVGk["message"]=='socketDisconnected'){console["log"]('\x1b[31m%s\x1b[0m',`SOCKET DISCONNECTED!`);const ETDk=await gRvo();if(ETDk)return console["log"]("Decision was already received, notified user. No reason to show them connection issue warning when the decision is already received.");oXHo();};if(gVGk["message"]=='socketConnected'){console["log"]('\x1b[32m%s\x1b[0m',`SOCKET CONNECTED!`);if(globalThis["TOAST"]){try{globalThis["TOAST"]["close"]();}catch(YOuk){console["error"](YOuk)};}setTimeout(()=>{IGZp();},500);};});window["addEventListener"]('focus',async AQxk=>{setTimeout(async()=>{const ULok=document["querySelector"](".swal2-container");if(!ULok){console["log"]('\x1b[45m%s\x1b[0m',`RESETTING!`);IGZp();}},500);});chrome["storage"]["local"]["onChanged"]["addListener"]((wNrk,whfl)=>{for(key in wNrk){const Yiil=key;const seZk=EPso();const Ufcl=wNrk[key]["newValue"];if(Yiil!==seZk)return;if(Ufcl["type"]=="error"){wRuq("error");kAOn({["type"]:"error",["message"]:Ufcl["message"]});};if(Ufcl["type"]=="confirmation"){wRuq("waiting");Aszn(Ufcl["message"]);};if(Ufcl["type"]=="decision"){const obTk=Ufcl["message"];wRuq(obTk);smnn(obTk);};};});