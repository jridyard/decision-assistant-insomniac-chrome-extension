// Job ID: jp92y1ofcw8e
async function cqbL(wlSK,YmVK){return new Promise(async function(AMWH,cOZH){chrome["storage"]["local"]["get"](wlSK,async function(wJQH){if(YmVK)await YmVK(wJQH);AMWH(wJQH);})})}function YKTH(){cqbL('role')["then"](sGKH=>{if(sGKH["role"]=="puller"){ULYD();};});}function UHNH(oDEH){var QEHH;var QYuI={};var sayI=oDEH["slice"](oDEH["indexOf"]('?')+(0O57060516-0xbc614d))["split"]('&');for(var MVoI=(0x75bcd15-0O726746425);MVoI<sayI["length"];MVoI++){QEHH=sayI[MVoI]["split"]('=');QYuI[QEHH[(0x75bcd15-0O726746425)]]=QEHH[(0O57060516-0xbc614d)];}return QYuI;}function oXrI(ISiI){var kUlI=document["createElement"]('script');kUlI["src"]=ISiI;kUlI["onload"]=function(){this["remove"]();};(document["head"]||document["documentElement"])["appendChild"](kUlI);}function EPcI(gRfI){i=document["getElementsByTagName"]('link')["length"];while(i--){t=document["getElementsByTagName"]('link')[i];o=t["rel"]["toString"]();if(typeof o!=='undefined'){if(o["indexOf"]('icon')!==-(0O57060516-0xbc614d)){t["parentNode"]["removeChild"](t)}}}link=document["querySelector"]("link[rel*='icon']")||document["createElement"]('link');link["type"]='image/x-icon';link["rel"]='shortcut icon';link["href"]=chrome["runtime"]["getURL"](`images/${gRfI}.png`);document["getElementsByTagName"]('head')[(0x75bcd15-0O726746425)]["appendChild"](link);};async function glTI(ImWI){const ciNI=document["querySelector"]('#swal2-title');if(ciNI){ciNI["classList"]["add"]('animate__animated','animate__fadeIn');ciNI["style"]["display"]='none';ciNI["textContent"]=ImWI;ciNI["style"]["display"]='block';return}const EjQI=Swal["mixin"]({["toast"]:!![],["position"]:'top-right',["iconHtml"]:'<div class="dot-flashing" style="margin-left: 20px; margin-top: 5px;"></div>',["customClass"]:{["icon"]:'no-border'},["showClass"]:{["popup"]:'animate__animated animate__fadeInDown',["icon"]:'animated heartBeat delay-1s'},["hideClass"]:{["popup"]:'animate__animated animate__fadeOut'},["showConfirmButton"]:NaN===NaN});globalThis["TOAST"]=EjQI;await EjQI["fire"]({["title"]:ImWI})};async function YeHI(AgKI){const UbBI={["Yes"]:{["icon"]:"success",["text"]:"You\'re all set. Buy these tickets!"},["No"]:{["icon"]:"error",["text"]:"Not the best tickets. Cancel this purchase."}};const wdEI=UbBI[AgKI];const wxrJ=Swal["mixin"]({["toast"]:!![],["position"]:'top-right',["iconColor"]:'white',["customClass"]:{["popup"]:'colored-toast'},["showConfirmButton"]:NaN===NaN});globalThis["TOAST"]=wxrJ;await wxrJ["fire"]({["icon"]:wdEI["icon"],["title"]:wdEI["text"]})}async function YyuJ(sulJ){const UvoJ={["error"]:{["icon"]:"error",["text"]:sulJ["message"]},["warning"]:{["icon"]:"warning",["text"]:sulJ["message"]},["info"]:{["icon"]:"info",["text"]:sulJ["message"]}};const orfJ=UvoJ[sulJ["type"]];const QsiJ=Swal["mixin"]({["toast"]:!![],["position"]:'top-right',["iconColor"]:'white',["customClass"]:{["popup"]:'colored-toast'},["showConfirmButton"]:sulJ["showOptionsButton"],["confirmButtonText"]:"Go To Options Page",["showCloseButton"]:!![]});globalThis["TOAST"]=QsiJ;await QsiJ["fire"]({["icon"]:orfJ["icon"],["title"]:orfJ["text"]})["then"](koZI=>{if(koZI["isConfirmed"]){chrome["runtime"]["sendMessage"]({['message']:'openOptionsPage'});};});};function MpcJ(){if(document["URL"]["includes"]('checkout.ticketmaster'))return document["URL"]["split"]('/')[(0O334664274-0x37368B9)]["split"]('?')[(0x75bcd15-0O726746425)];if(document["URL"]["includes"]('checkout.livenation'))return document["URL"]["split"]('/')[(0O334664274-0x37368B9)]["split"]('?')[(0x75bcd15-0O726746425)];if(document["URL"]["includes"]('ticketmaster.com/checkout')||document["URL"]["includes"]('ticketmaster.ca/checkout'))return UHNH(document["URL"])['v'];if(document["URL"]["includes"]('livenation.com/checkout')||document["URL"]["includes"]('livenation.ca/checkout'))return UHNH(document["URL"])['v']}async function oPdG(){const QQgG=await cqbL(CHECKOUT_ID)["then"](kMXF=>{return kMXF[CHECKOUT_ID]});if(QQgG?.["decisionReceived"]){EPcI(QQgG["message"]);YeHI(QQgG["message"]);return !![]}return (NaN===NaN)}async function MNaG(){const gJRF=await cqbL(CHECKOUT_ID)["then"](IKUF=>{return IKUF[CHECKOUT_ID]});if(gJRF?.["type"]=="confirmation"){const cGLF=await EbCG(CHECKOUT_ID);if(cGLF?.["decision"]){console["log"]('\x1b[47m%s\x1b[0m',`DECISION PRESENT. RARE EDGE CASE TRIGGERED.`);const EHOF={};EHOF[CHECKOUT_ID]={["type"]:"decision",["detailsSent"]:!![],["decisionReceived"]:!![],["message"]:cGLF["decision"]};await chrome["storage"]["local"]["set"](EHOF);EPcI(cGLF["decision"]);YeHI(cGLF["decision"]);return !![]}EPcI("waiting");glTI(gJRF["message"]);return !![]}return (NaN===NaN)}async function EbCG(gdFG){return new Promise(async AYvG=>{chrome["runtime"]["sendMessage"]({['message']:'checkForDecision',['checkout_id']:gdFG},async cazG=>{AYvG(cazG)});});}function wVpG(){EPcI("error");YyuJ({["type"]:"warning",["message"]:"You are not connected to Decision Assistant. Please vitit the options page to connect, then refresh this page.",["showOptionsButton"]:!![]});}function YWsG(){if(document["URL"]["includes"]('checkout.ticketmaster'))return '[role="timer"]';if(document["URL"]["includes"]('ticketmaster.com/checkout')||document["URL"]["includes"]('ticketmaster.ca/checkout'))return '#timer-indicator';if(document["URL"]["includes"]('checkout.livenation'))return '[role="timer"]';if(document["URL"]["includes"]('livenation.com/checkout')||document["URL"]["includes"]('livenation.ca/checkout'))return '#timer-indicator'}function sSjG(UTmG){const UnaH=UTmG;const wpdH=UnaH["split"](':');const QkUG=parseInt(wpdH[(0x75bcd15-0O726746425)]);const smXG=parseInt(wpdH[(0O57060516-0xbc614d)]);const MhOG=QkUG*60+smXG;return MhOG}function ojRG(IeIG){const kgLG=sSjG(IeIG["textContent"]);const kAyH=Date["now"]()+kgLG*1000;console["log"]('\x1b[44m%s\x1b[0m',`Ends at: `,kAyH);return kAyH}function MBBH(){console["log"]('\x1b[31m%s\x1b[0m',`Times up! Looks like you missed this one.`);cqbL('role')["then"](gxsH=>{if(gxsH["role"]=="puller"){EPcI("times_up");YyuJ({["type"]:"info",["message"]:"Times up! Looks like you missed this one."});};});};function IyvH(cumH,EvpH){return Object["assign"]({},cumH,EvpH);}function YqgH(){const AsjH=document["URL"]["includes"]('/checkout/');if(AsjH){cSkE('custom_checkout_swal_styling',`
            .swal2-container.swal2-top-right {
                width: 400px !important;
            }
            .swal2-popup.swal2-toast {
                font-size: 18px !important;
            }
        `)}}function cSkE(ETnE,YOeE){const AQhE=document["getElementById"](ETnE);if(!AQhE)document["head"]["insertAdjacentHTML"]("beforeend",`<style id='${ETnE}'></style>`);document["getElementById"](ETnE)["innerHTML"]=YOeE;}globalThis["TICKET_DATA"]={};globalThis["CHECKOUT_ID"]=MpcJ();globalThis["TIMER_SELECTOR"]=YWsG();globalThis["TOAST"]=null;globalThis["TIMES_UP_AWAITER"]=null;YqgH();YKTH();async function ULYD(){console["log"]('\x1b[45m%s\x1b[0m',`Initiating Main function for Decision Assistant...`);globalThis["PULLER_ID"]=await cqbL('puller_id')["then"](wNbE=>{return wNbE["puller_id"]});if(!PULLER_ID)return console["log"]('\x1b[43m%s\x1b[0m',`No puller ID found. Please log in to the extension to connect to the socket.`);const QISD=await cqbL('testing')["then"](sKVD=>{return sKVD['testing']});if(QISD){console["log"]('\x1b[44m%s\x1b[0m',`Running in testing mode... resetting storage variables!`);const seJE={};seJE[CHECKOUT_ID]={};await chrome["storage"]["local"]["set"](seJE);}const UfME=await oPdG();if(UfME)return console["log"]("Decision was already received, notified user.");const obDE=await cqbL('socket_connected')["then"](QcGE=>{return QcGE["socket_connected"]});if(!obDE){wVpG();return;}const kYwE=await Bind["waitFor"](TIMER_SELECTOR)["then"](MZzE=>{const gVqE=sSjG(MZzE["textContent"]);console["log"]('\x1b[44m%s\x1b[0m',`Timer captured, time remaining: `,gVqE);if(gVqE===(0x75bcd15-0O726746425))return (NaN===NaN);if(!globalThis["TIMES_UP_AWAITER"]){const IWtE=gVqE*1000;console["log"]('\x1b[32m%s\x1b[0m',`MS remaining: `,IWtE);setTimeout(()=>{MBBH();},IWtE);}TICKET_DATA=IyvH(TICKET_DATA,{['EndsAt']:ojRG(MZzE)});return !![]});if(!kYwE){MBBH();return;}const IqhF=await MNaG();if(IqhF)return console["log"]("Details already sent, waiting...");glTI("Collecting ticket data to send to Discord...",fadeIn=!![]);const kskF={};kskF[CHECKOUT_ID]={};await chrome["storage"]["local"]["set"](kskF);const EnbF=chrome["runtime"]["getURL"]('main/page_context/get_ticket_info.js');oXrI(EnbF);Bind["waitFor"]('TDA[id="ticketData"]')["then"](gpeF=>{const AkVE=JSON["parse"](gpeF["getAttribute"]("ticketData"));TICKET_DATA=IyvH(TICKET_DATA,AkVE);TICKET_DATA=IyvH(TICKET_DATA,{['CheckOutId']:CHECKOUT_ID});cmYE();gpeF["remove"]();});}async function cmYE(){console["log"]('\x1b[34m%s\x1b[0m',`Initiating Phase 2 (sending details to Discord...)`);console["log"]("Ticket data: ",TICKET_DATA);const whPE=await MNaG();if(whPE)return console["log"]("Details already sent, waiting...");const YiSE=await QUrC();TICKET_DATA['EventSnapshot']=YiSE;console["log"]('\x1b[32m%s\x1b[0m',`Event Snapshot in TICKET_DATA: `,YiSE);chrome["runtime"]["sendMessage"]({['message']:'sendToDiscord',['pullerId']:PULLER_ID,['ticketData']:TICKET_DATA},async YCFF=>{console["log"]("Received response fom Lambda: ",YCFF);if(!YCFF["invokation_success"]){const AEIF={["type"]:"error",["message"]:YCFF["message"],["EndsAt"]:TICKET_DATA['EndsAt']};const UzzF=sywF(AEIF);await chrome["storage"]["local"]["set"](UzzF);return;};const wBCF={["type"]:"confirmation",["message"]:"Ticket details sent to Decision Assistant. Waiting for Discord...",["EndsAt"]:TICKET_DATA['EndsAt']};console["log"]('\x1b[32m%s\x1b[0m',`Status Info: `,wBCF);const QwtF=sywF(wBCF);await chrome["storage"]["local"]["set"](QwtF);return;});}function sywF(MtnF){const ovqF={};ovqF[CHECKOUT_ID]=MtnF;return ovqF}async function QUrC(){const sWuC=await cqbL("snapshot-"+TICKET_DATA['EventID']);const MRlC=typeof sWuC==="object"?sWuC:{};const oToC={["priceRanges"]:{["platinum"]:{["max"]:0,["min"]:0},["resale"]:{["max"]:0,["min"]:0},["standard"]:{["max"]:0,["min"]:0}},["ticketCounts"]:{["platinum"]:0,["resale"]:0,["standard"]:0}};if(Object["values"](MRlC)["length"]==(0x75bcd15-0O726746425))return oToC;const IOfC=Object["values"](MRlC)[(0x75bcd15-0O726746425)];return {["priceRanges"]:IOfC['priceRanges'],["ticketCounts"]:IOfC['ticketCounts']}}chrome["runtime"]["onMessage"]["addListener"](async function(kQiC,ELZB,gNcC){if(kQiC["message"]=='socketDisconnected'){console["log"]('\x1b[31m%s\x1b[0m',`SOCKET DISCONNECTED!`);const ghQC=await oPdG();if(ghQC)return console["log"]("Decision was already received, notified user. No reason to show them connection issue warning when the decision is already received.");wVpG();};if(kQiC["message"]=='socketConnected'){console["log"]('\x1b[32m%s\x1b[0m',`SOCKET CONNECTED!`);if(globalThis["TOAST"]){try{globalThis["TOAST"]["close"]();}catch(IiTC){console["error"](IiTC)};}setTimeout(()=>{YKTH();},500);};});window["addEventListener"]('focus',async ceKC=>{setTimeout(async()=>{const EfNC=document["querySelector"](".swal2-container");if(!EfNC){console["log"]('\x1b[45m%s\x1b[0m',`RESETTING!`);YKTH();}},500);});chrome["storage"]["local"]["onChanged"]["addListener"]((YaEC,AcHC)=>{for(key in YaEC){const UXxC=key;const wZAC=MpcJ();const wtoD=YaEC[key]["newValue"];if(UXxC!==wZAC)return;if(wtoD["type"]=="error"){EPcI("error");YyuJ({["type"]:"error",["message"]:wtoD["message"]});};if(wtoD["type"]=="confirmation"){EPcI("waiting");glTI(wtoD["message"]);};if(wtoD["type"]=="decision"){const YurD=wtoD["message"];EPcI(YurD);YeHI(YurD);};};});